(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{226:function(t,e,v){"use strict";v.r(e);var a=v(0),_=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,e=t.$createElement,v=t._self._c||e;return v("div",{staticClass:"content"},[v("h1",{attrs:{id:"kubernetes-数据问题"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-数据问题","aria-hidden":"true"}},[t._v("#")]),t._v(" Kubernetes 数据问题")]),t._v(" "),v("h2",{attrs:{id:"配置、密钥"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#配置、密钥","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置、密钥")]),t._v(" "),v("p",[t._v("这些变动不太频繁的，建议生成 "),v("code",[t._v("configMap")]),t._v(" 和 "),v("code",[t._v("secret")]),t._v(" 进行挂载。")]),t._v(" "),v("h2",{attrs:{id:"数据库、缓存-数据"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#数据库、缓存-数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库、缓存 数据")]),t._v(" "),v("p",[t._v("存放到 "),v("code",[t._v("pvc")]),t._v(" 中，只要不删除 "),v("code",[t._v("pv")]),t._v(" "),v("code",[t._v("pvc")]),t._v(", 数据就不会丢失。")]),t._v(" "),v("h2",{attrs:{id:"项目数据"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#项目数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目数据")]),t._v(" "),v("p",[t._v("例如 PHP 源代码")]),t._v(" "),v("h3",{attrs:{id:"开发环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#开发环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),v("p",[t._v("开发环境，源码变动频繁，最好是将本地目录挂载进容器中。")]),t._v(" "),v("p",[t._v("假设开发环境使用的是 Docker 桌面版，这两个比较特殊，实现原理实际上是运行了一个 Linux 虚拟机，所以虚拟机的路径不等于宿主机的路径，但有一个对应关系（实际对应关系我已经通过脚本解析，有兴趣的可以查看本项目 CLI 源码）。")]),t._v(" "),v("p",[t._v("本项目的解决方案同上边，使用 "),v("code",[t._v("hostPath")]),t._v(" 类型的 "),v("code",[t._v("pv")]),t._v(" 和 "),v("code",[t._v("pvc")])]),t._v(" "),v("p",[t._v("我们只要在家目录 "),v("code",[t._v("~/app/*")]),t._v(" 中开发就可以了（还是两步走，新建 PHP 项目目录、NGINX 配置文件）。")]),t._v(" "),v("h3",{attrs:{id:"生产环境"}},[v("a",{staticClass:"header-anchor",attrs:{href:"#生产环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 生产环境")]),t._v(" "),v("p",[t._v("具有 "),v("strong",[t._v("多节点")]),t._v(" "),v("strong",[t._v("跨节点")]),t._v(" 的特性，所以我们不能使用 "),v("code",[t._v("hostPath")]),t._v("，必须使用云服务商提供的跨节点数据卷")]),t._v(" "),v("p",[v("strong",[t._v("1.")]),t._v(" 打入镜像，交付容器")]),t._v(" "),v("p",[v("strong",[t._v("2.")]),t._v(" 挂载数据卷 (NFS)")])])}],!1,null,null,null);e.default=_.exports}}]);