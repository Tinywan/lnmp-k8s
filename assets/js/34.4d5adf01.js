(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{199:function(e,t,s){"use strict";s.r(t);var a=s(0),v=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"volumes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volumes","aria-hidden":"true"}},[e._v("#")]),e._v(" Volumes")]),e._v(" "),s("ul",[s("li",[e._v("PV 是 "),s("strong",[e._v("全局")]),e._v(" 的,没有命名空间的概念。")])]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ kubectl get storageclass\n")])])]),s("p",[s("code",[e._v("PersistentVolumes")]),e._v(" 可以有多种回收策略，包括 "),s("strong",[e._v("Retain")]),e._v("、"),s("strong",[e._v("Recycle")]),e._v(" 和 "),s("strong",[e._v("Delete")]),e._v("。对于动态配置的 "),s("code",[e._v("PersistentVolumes")]),e._v(" 来说，默认回收策略为 "),s("strong",[e._v("Delete")]),e._v("。这表示当用户删除对应的 "),s("code",[e._v("PersistentVolumeClaim")]),e._v(" 时，动态配置的 volume 将被自动删除。")]),e._v(" "),s("p",[e._v("如果 volume 包含重要数据时，这种自动行为可能是不合适的。那种情况下，更适合使用 "),s("strong",[e._v("Retain")]),e._v(" 策略。使用 "),s("strong",[e._v("Retain")]),e._v(" 时，如果用户删除 "),s("code",[e._v("PVC")]),e._v("，对应的 "),s("code",[e._v("PV")]),e._v(" 不会被删除。相反，它将变为 "),s("strong",[e._v("Released")]),e._v(" 状态，表示所有的数据可以被手动恢复。")]),e._v(" "),s("h2",{attrs:{id:"pv-回收策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pv-回收策略","aria-hidden":"true"}},[e._v("#")]),e._v(" PV 回收策略")]),e._v(" "),s("ul",[s("li",[s("p",[s("strong",[e._v("Retain")]),e._v(" 就是保留现场，K8S 什么也不做，允许人工处理保留的数据")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("Delete")]),e._v(" K8S会自动删除该 PV 及里面的数据")])]),e._v(" "),s("li",[s("p",[s("strong",[e._v("Recycle")]),e._v(" K8S会将 PV 里的数据删除，然后把 PV 的状态变成 Available，又可以被新的 PVC 绑定使用")])]),e._v(" "),s("li",[s("p",[e._v("NFS 和 HostPath 支持回收 "),s("strong",[e._v("Recycle")])])]),e._v(" "),s("li",[s("p",[e._v("AWS、EBS、GCE、PD 和 Cinder 支持删除 "),s("strong",[e._v("Delete")]),e._v("。")])])]),e._v(" "),s("h2",{attrs:{id:"状态位清除"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#状态位清除","aria-hidden":"true"}},[e._v("#")]),e._v(" 状态位清除")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ kubectl replace -f xxx.yaml "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# 定义 PV 的 YAML 文件")]),e._v("\n")])])]),s("h1",{attrs:{id:"tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tips","aria-hidden":"true"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("静态提供：管理员手动创建多个PV，供PVC使用。")])]),e._v(" "),s("li",[s("p",[e._v("动态提供：动态创建PVC特定的PV，并绑定。")])])])])}],!1,null,null,null);v.options.__file="README.md";t.default=v.exports}}]);