(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{227:function(t,v,e){"use strict";e.r(v);var _=e(0),a=Object(_.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,v=t.$createElement,e=t._self._c||v;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"kubernetes-数据问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubernetes-数据问题","aria-hidden":"true"}},[t._v("#")]),t._v(" Kubernetes 数据问题")]),t._v(" "),e("h2",{attrs:{id:"配置、密钥"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置、密钥","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置、密钥")]),t._v(" "),e("p",[t._v("这些变动不太频繁的，建议生成 "),e("code",[t._v("configMap")]),t._v(" 和 "),e("code",[t._v("secret")]),t._v(" 进行挂载。")]),t._v(" "),e("h2",{attrs:{id:"数据库、缓存-数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库、缓存-数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库、缓存 数据")]),t._v(" "),e("p",[t._v("存放到 "),e("code",[t._v("pvc")]),t._v(" 中，只要不删除 "),e("code",[t._v("pv")]),t._v(" "),e("code",[t._v("pvc")]),t._v(", 数据就不会丢失。")]),t._v(" "),e("h2",{attrs:{id:"项目数据"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#项目数据","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目数据")]),t._v(" "),e("p",[t._v("例如 PHP 源代码")]),t._v(" "),e("h3",{attrs:{id:"开发环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开发环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 开发环境")]),t._v(" "),e("p",[t._v("开发环境，源码变动频繁，最好是将本地目录挂载进容器中。")]),t._v(" "),e("p",[t._v("假设开发环境使用的是 Docker 桌面版，这两个比较特殊，实现原理实际上是运行了一个 Linux 虚拟机，所以虚拟机的路径不等于宿主机的路径，但有一个对应关系（实际对应关系我已经通过脚本解析，有兴趣的可以查看本项目 CLI 源码）。")]),t._v(" "),e("p",[t._v("本项目的解决方案同上边，使用 "),e("code",[t._v("hostPath")]),t._v(" 类型的 "),e("code",[t._v("pv")]),t._v(" 和 "),e("code",[t._v("pvc")])]),t._v(" "),e("p",[t._v("我们只要在家目录 "),e("code",[t._v("~/app/*")]),t._v(" 中开发就可以了（还是两步走，新建 PHP 项目目录、NGINX 配置文件）。")]),t._v(" "),e("h3",{attrs:{id:"生产环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生产环境","aria-hidden":"true"}},[t._v("#")]),t._v(" 生产环境")]),t._v(" "),e("p",[t._v("具有 "),e("strong",[t._v("多节点")]),t._v(" "),e("strong",[t._v("跨节点")]),t._v(" 的特性，可以选用以下几种方法")]),t._v(" "),e("p",[e("strong",[t._v("1.")]),t._v(" 打入镜像，交付容器")]),t._v(" "),e("p",[e("strong",[t._v("2.")]),t._v(" 挂载可以跨节点的数据卷 (NFS)")]),t._v(" "),e("p",[e("strong",[t._v("3.")]),t._v(" 使用 "),e("code",[t._v("Daemonset")]),t._v("("),e("code",[t._v("git-sync")]),t._v(") 保证每个节点都有代码，通过 "),e("code",[t._v("hostpath")]),t._v(" 挂载")])])}],!1,null,null,null);v.default=a.exports}}]);